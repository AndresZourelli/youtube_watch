{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\azour\\\\Desktop\\\\react\\\\Youtube Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\azour\\\\Desktop\\\\react\\\\Youtube Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\azour\\\\Desktop\\\\react\\\\Youtube Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\azour\\\\Desktop\\\\react\\\\Youtube Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\azour\\\\Desktop\\\\react\\\\Youtube Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\azour\\\\Desktop\\\\react\\\\Youtube Project\\\\client\\\\src\\\\components\\\\home\\\\home.js\";\n\n/* eslint-disable no-unused-expressions */\nimport React, { Component } from 'react';\nimport VideoQueue from '../../components/VideoQueue/VideoQueue';\nimport PlayerControls from '../../components/PlayerControls/PlayerControls';\nimport ReactPlayer from 'react-player';\nimport io from 'socket.io-client';\nimport \"./home.css\";\nvar socket = io.connect('http://localhost:8000');\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _this.addEvent = function (event) {\n      console.log(\"hi\");\n\n      _this.setState({\n        playing: event.playing,\n        seek: event.seek\n      });\n\n      console.log(_this.state.playing, event.playing);\n    };\n\n    _this.updateWindowDimensions = function () {\n      _this.setState({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n\n    _this.timeformat = function (seconds) {\n      var seconds = Math.floor(seconds);\n      var minutes = Math.floor(seconds / 60);\n      var sseconds = seconds % 60 < 10 ? '0' + seconds % 60 : seconds % 60;\n\n      _this.setState({\n        percentage: minutes + ':' + sseconds\n      });\n\n      return minutes + ':' + sseconds;\n    };\n\n    _this.seekChange = function (event) {\n      _this.setState({\n        seek: event.target.value\n      });\n    };\n\n    _this.onTogglePlay = function () {\n      _this.setState({\n        playing: !_this.state.playing\n      });\n    };\n\n    _this.onProgress = function (event) {\n      if (!_this.state.isseeking) {\n        var time = _this.timeformat(event.playedSeconds);\n\n        _this.setState({\n          percentage: time,\n          seek: event.playedSeconds\n        });\n      }\n    };\n\n    _this.onDuration = function (event) {\n      _this.setState({\n        duration: event\n      });\n    };\n\n    _this.onSeekSearch = function (event) {\n      _this.setState({\n        isseeking: true\n      });\n    };\n\n    _this.onSeekChange = function (event) {\n      _this.setState({\n        seek: event.target.value,\n        played: event.target.value,\n        clock: _this.timeformat(event.target.value)\n      });\n    };\n\n    _this.onSeekDone = function (event) {\n      _this.setState({\n        isseeking: false\n      });\n\n      socket.emit('seek', {\n        seek: event.target.value\n      });\n\n      _this.player.seekTo(event.target.value);\n    };\n\n    _this.ref = function (player) {\n      _this.player = player;\n    };\n\n    _this.onTextUpdate = function (event) {\n      _this.setState({\n        videoURL: event.target.value\n      });\n    };\n\n    _this.handleKeyPress = function (event) {\n      if (event.key == 'Enter') {\n        console.log('Submitted!');\n\n        _this.setState({\n          videoURL: event.target.value\n        });\n\n        _this.sendNamesToServer(event.target.value);\n      }\n    };\n\n    _this.nextVideo = function (event) {\n      console.log(\"event\");\n    };\n\n    _this.sendNamesToServer = function (link) {\n      var data = {\n        youtube: link\n      };\n      fetch(\"http://localhost:8000/upload\", {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          youtube: link\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this.setState({\n          videoNames: data\n        });\n\n        console.log(_this.state.videoNames);\n      });\n    };\n\n    _this.onToggleNext = function () {};\n\n    _this.onDelete = function (video) {\n      fetch(\"http://localhost:8000/delete\", {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          link: video\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this.setState({\n          videoNames: JSON.stringify({\n            data: data\n          })\n        });\n\n        console.log(_this.state.videoNames);\n      });\n    };\n\n    _this.onToggleStart = function () {\n      _this.setState({\n        playing: 1\n      });\n    };\n\n    _this.onTogglePause = function () {\n      _this.setState({\n        playing: 0\n      });\n    };\n\n    _this.onLoad = function () {\n      fetch(\"http://localhost:8000/load\", {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this.setState({\n          videoNames: data,\n          queue: data.slice(1)\n        });\n      });\n    };\n\n    _this.onDragStart = function (event, index) {\n      _this.draggedItem = _this.state.queue[index];\n      event.dataTransfer.effectAllowed = \"move\";\n      event.dataTransfer.setData(\"text/html\", event.target.parentNode);\n      event.dataTransfer.setDragImage(event.target.parentNode, 20, 20);\n    };\n\n    _this.onDragOver = function (index) {\n      console.log(index);\n      var draggedOverItem = _this.state.queue[index];\n\n      if (_this.draggedItem === draggedOverItem) {\n        return;\n      }\n\n      var items = _this.state.videoNames.filter(function (item) {\n        return item !== _this.draggedItem;\n      });\n\n      items.splice(index, 0, _this.draggedItem);\n\n      _this.setState({\n        queue: items\n      });\n    };\n\n    _this.onDragEnd = function () {\n      _this.draggedIdx = null;\n      var oldList = _this.state.queue;\n      var first = _this.state.videoNames[0];\n      var newList = oldList.splice(0, 0, first);\n      console.log(_this.state.videoNames[0]);\n    };\n\n    _this.state = {\n      controls: false,\n      bar: 0,\n      width: 0,\n      height: 0,\n      time: 0,\n      percentage: 0,\n      //being used as formated clock\n      seek: 0,\n      currentTime: 0,\n      duration: 0,\n      isPaused: true,\n      playing: false,\n      isseeking: 0,\n      played: 0,\n      clock: 0,\n      videoURL: \"\",\n      videoNames: [],\n      queue: []\n    };\n    socket.on('recieve', function (payload) {\n      console.log(\"payload delivered\", payload);\n\n      _this.addEvent(payload);\n    });\n    socket.on('seekgot', function (payload) {\n      console.log(\"payload delivered 2\", payload);\n\n      _this.player.seekTo(payload.seek);\n    });\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.onLoad();\n      this.updateWindowDimensions();\n      window.addEventListener('resize', this.updateWindowDimensions);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('resize', this.updateWindowDimensions);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevState.playing !== this.state.playing) {\n        socket.emit('pause/play', {\n          playing: this.state.playing,\n          seek: this.state.seek\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var opts = {\n        height: \"auto\",\n        //set the video to a 16:9 ratio based on window size\n        width: \"100%\"\n      };\n      var first = this.state.videoNames.length > 0 ? this.state.videoNames[0].youtube : this.state.videoNames;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"React Player\"), React.createElement(\"input\", {\n        type: \"text\",\n        onKeyPress: this.handleKeyPress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"main_container\",\n        onClick: this.onTogglePlay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(ReactPlayer, {\n        className: \"main_container\",\n        controls: this.state.controls,\n        ref: this.ref,\n        url: first,\n        width: opts.width,\n        playing: this.state.playing,\n        onProgress: this.onProgress,\n        onDuration: this.onDuration,\n        onSeek: (function (e) {\n          return console.log('onSeek', e);\n        }, 50),\n        onPause: this.onTogglePause,\n        onPlay: this.onToggleStart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      })), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, this.state.isseeking ? this.state.clock : this.state.percentage), React.createElement(PlayerControls, {\n        change: this.onSeekChange,\n        duration: this.state.duration,\n        seek: this.state.seek,\n        _onMouseDown: this.onSeekSearch,\n        _onMouseUp: this.onSeekDone,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.onTogglePlay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"Pause/Play\"), React.createElement(\"button\", {\n        onClick: this.onToggleNext,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \" Next Video\"), React.createElement(VideoQueue, Object.assign({}, this.props, {\n        dragEnd: this.onDragEnd,\n        dragOver: this.onDragOver,\n        dragStart: this.onDragStart,\n        deleteVideo: this.onDelete,\n        changeVideo: this.nextVideo,\n        videoNames: this.state.queue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport { Home as default };","map":{"version":3,"sources":["C:\\Users\\azour\\Desktop\\react\\Youtube Project\\client\\src\\components\\home\\home.js"],"names":["React","Component","VideoQueue","PlayerControls","ReactPlayer","io","socket","connect","Home","props","addEvent","event","console","log","setState","playing","seek","state","updateWindowDimensions","width","window","innerWidth","height","innerHeight","timeformat","seconds","Math","floor","minutes","sseconds","percentage","seekChange","target","value","onTogglePlay","onProgress","isseeking","time","playedSeconds","onDuration","duration","onSeekSearch","onSeekChange","played","clock","onSeekDone","emit","player","seekTo","ref","onTextUpdate","videoURL","handleKeyPress","key","sendNamesToServer","nextVideo","link","data","youtube","fetch","method","headers","body","JSON","stringify","then","response","json","videoNames","onToggleNext","onDelete","video","onToggleStart","onTogglePause","onLoad","queue","slice","onDragStart","index","draggedItem","dataTransfer","effectAllowed","setData","parentNode","setDragImage","onDragOver","draggedOverItem","items","filter","item","splice","onDragEnd","draggedIdx","oldList","first","newList","controls","bar","currentTime","isPaused","on","payload","addEventListener","removeEventListener","prevProps","prevState","opts","length","e"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-expressions */\r\nimport React, { Component } from 'react';\r\nimport VideoQueue from '../../components/VideoQueue/VideoQueue';\r\nimport PlayerControls from '../../components/PlayerControls/PlayerControls';\r\nimport ReactPlayer from 'react-player';\r\nimport io from 'socket.io-client';\r\nimport \"./home.css\";\r\nconst socket = io.connect('http://localhost:8000');\r\nexport default class Home extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = { \r\n\t\t\tcontrols: false,\r\n\t\t\tbar:0, \r\n\t\t\twidth: 0, \r\n\t\t\theight: 0, \r\n\t\t\ttime: 0, \r\n\t\t\tpercentage: 0 , //being used as formated clock\r\n\t\t\tseek: 0, \r\n\t\t\tcurrentTime:0, \r\n\t\t\tduration:0, \r\n\t\t\tisPaused:true,\r\n\t\t\tplaying: false,\r\n\t\t\tisseeking: 0,\r\n\t\t\tplayed: 0,\r\n\t\t\tclock: 0,\r\n\t\t\tvideoURL: \"\",\r\n\t\t\tvideoNames:[],\r\n\t\t\tqueue: []\r\n\t\t\t};\r\n\t\t\r\n\r\n\t\t\tsocket.on('recieve', (payload) => {\r\n\t\t\t\tconsole.log(\"payload delivered\",payload);\r\n\t\t\t\tthis.addEvent(payload);\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\t\t\tsocket.on('seekgot', (payload) => {\r\n\t\t\t\tconsole.log(\"payload delivered 2\",payload);\r\n\t\t\t\tthis.player.seekTo(payload.seek);\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\t\t}\r\n\r\n\taddEvent = (event) => {\r\n\t\tconsole.log(\"hi\")\r\n\t\tthis.setState({playing: event.playing, seek:event.seek})\r\n\t\tconsole.log(this.state.playing, event.playing)\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.onLoad()\r\n\t\tthis.updateWindowDimensions();\r\n\t\twindow.addEventListener('resize', this.updateWindowDimensions);\r\n\t\t}\r\n\r\n\tcomponentWillUnmount(){\r\n\t\twindow.removeEventListener('resize',this.updateWindowDimensions);\r\n\t\t}\r\n\r\n\tupdateWindowDimensions = () => {\r\n\t\tthis.setState({width: window.innerWidth, height: window.innerHeight});\r\n\t\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState){\r\n\t\tif(prevState.playing !== this.state.playing){\r\n\t\t\tsocket.emit('pause/play', {playing: this.state.playing, seek:this.state.seek});\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\ttimeformat = (seconds) => {\r\n\t\tvar seconds = Math.floor(seconds);\r\n\t\tconst minutes = Math.floor(seconds/60) ;\r\n\t\tconst sseconds = seconds%60 < 10 ? '0'+seconds%60 : seconds%60 ;\r\n\t\tthis.setState({percentage: minutes + ':' +sseconds});\r\n\t\treturn minutes + ':' +sseconds\r\n\t}\r\n\r\n\tseekChange = (event) => {\r\n\r\n\t\tthis.setState({seek: event.target.value});\r\n\t}\r\n\t\r\n\tonTogglePlay = () => {\r\n\t\tthis.setState({playing: !this.state.playing});\r\n\t\t\r\n\t}\r\n\tonProgress = (event) => {\r\n\t\t\r\n\t\tif (!this.state.isseeking){\r\n\r\n\t\t\tconst time = this.timeformat(event.playedSeconds);\r\n\t\t\tthis.setState({percentage: time, seek: event.playedSeconds})\r\n\t\t}\r\n\t}\r\n\r\n\tonDuration = (event) => {\r\n\t\tthis.setState({duration: event})\r\n\t}\r\n\t\r\n\tonSeekSearch = (event) => {\r\n\t\tthis.setState({isseeking: true})\r\n\t}\r\n\tonSeekChange = (event) => {\r\n\t\tthis.setState({seek: event.target.value, played:event.target.value, clock:this.timeformat(event.target.value) })\r\n\t}\r\n\r\n\tonSeekDone = (event) => {\r\n\t\tthis.setState({isseeking: false})\r\n\t\tsocket.emit('seek', {seek:event.target.value})\r\n\t\tthis.player.seekTo(event.target.value)\r\n\t}\r\n\r\n\tref = player => {\r\n\t\tthis.player = player\r\n\t}\r\n\t\r\n\tonTextUpdate = (event) => {\r\n\t\tthis.setState({videoURL: event.target.value})\r\n\t}\r\n\t\r\n\thandleKeyPress = (event) => {\r\n\t\t\r\n\t\tif(event.key == 'Enter'){\r\n\t\t\tconsole.log('Submitted!');\r\n\t\t\tthis.setState({videoURL: event.target.value});\r\n\t\t\tthis.sendNamesToServer(event.target.value);\r\n\t\t}\r\n\t}\r\n\r\n\tnextVideo = (event) => {\r\n\t\tconsole.log(\"event\")\r\n\r\n\t}\r\n\r\n\tsendNamesToServer = (link) => {\r\n\t\tvar data = { youtube : link };\r\n\t\tfetch(\"http://localhost:8000/upload\", {\r\n\t\t\tmethod: 'post',\r\n\t\t\theaders: {'Content-Type': 'application/json'},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tyoutube: link\r\n\r\n\t\t})}).then( response => response.json()).then(data => {\r\n\t\t\tthis.setState({videoNames: data})\r\n\t\t\tconsole.log(this.state.videoNames)\r\n\t\t})\r\n\t}\r\n\r\n\tonToggleNext = () => {\r\n\r\n\t}\r\n\r\n\tonDelete = (video) => {\r\n\t\tfetch(\"http://localhost:8000/delete\", {\r\n\t\t\tmethod: 'post',\r\n\t\t\theaders: {'Content-Type': 'application/json'},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tlink: video\r\n\r\n\t\t})}).then( response => response.json()).then(data => {\r\n\t\t\tthis.setState({videoNames: JSON.stringify({data})})\r\n\t\t\tconsole.log(this.state.videoNames)\r\n\t\t})\r\n\t}\r\n\r\n\tonToggleStart = () => {\r\n\t\tthis.setState({playing: 1});\r\n\t\t\r\n\t}\r\n\r\n\tonTogglePause = () => {\r\n\t\tthis.setState({playing: 0});\r\n\t\t\r\n\t}\r\n\r\n\tonLoad = () => {\r\n\t\tfetch(\"http://localhost:8000/load\", {\r\n\t\t\tmethod: 'post',\r\n\t\t\theaders: {'Content-Type': 'application/json'}\r\n\t\t\t}).then( response => response.json()).then(data => {\r\n\t\t\tthis.setState({videoNames: data, queue: data.slice(1)})\r\n\t\t})\r\n\t}\r\n\t\r\n\tonDragStart = (event, index) => {\r\n\t\tthis.draggedItem = this.state.queue[index];\r\n\t\tevent.dataTransfer.effectAllowed = \"move\";\r\n\t\tevent.dataTransfer.setData(\"text/html\", event.target.parentNode);\r\n\t\tevent.dataTransfer.setDragImage(event.target.parentNode, 20, 20);\r\n\t}\r\n\r\n\tonDragOver = (index) => {\r\n\t\tconsole.log(index)\r\n\t\tconst draggedOverItem = this.state.queue[index];\r\n\r\n\t\tif(this.draggedItem === draggedOverItem){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet items = this.state.videoNames.filter(item => item !== this.draggedItem);\r\n\r\n\t\titems.splice(index, 0, this.draggedItem);\r\n\r\n\t\tthis.setState({queue: items})\r\n\t}\r\n\r\n\tonDragEnd = () => {\r\n\t\tthis.draggedIdx = null;\r\n\t\tvar oldList = this.state.queue;\r\n\t\tvar first = this.state.videoNames[0];\r\n\t\tvar newList = oldList.splice(0,0,first)\r\n\t\tconsole.log(this.state.videoNames[0])\r\n\t}\r\n\trender() {\r\n\r\n\t\tconst opts = {\r\n\t      height: \"auto\", //set the video to a 16:9 ratio based on window size\r\n\t      width: \"100%\"\r\n\t    };\r\n\r\n\t    const first = this.state.videoNames.length > 0 ? this.state.videoNames[0].youtube : this.state.videoNames;\r\n\r\n\t    return (\r\n\t      <div>\r\n\t\t      <h3>React Player</h3>\r\n\t\t\t  <input type=\"text\"  onKeyPress={this.handleKeyPress}/>\r\n\t\t\t  <div className = 'main_container' onClick={this.onTogglePlay}>\r\n\t\t\t      <ReactPlayer className='main_container'\r\n\r\n\t\t\t      \tcontrols = {this.state.controls}\r\n\t\t\t      \tref = {this.ref}\r\n\t\t\t      \turl = {first}\r\n\t\t\t      \twidth = {opts.width} \r\n\t\t\t      \t\r\n\t\t\t      \tplaying = {this.state.playing}\r\n\t\t\t      \tonProgress = {this.onProgress}\r\n\t\t\t      \tonDuration = {this.onDuration}\r\n\t\t\t      \tonSeek = { e => console.log('onSeek',e),50}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonPause = {this.onTogglePause}\r\n\t\t\t\t\tonPlay = {this.onToggleStart}\r\n\t\t\t      \t/>\r\n\t\t\t  </div>\r\n\t\t\t  <h1></h1>\r\n\t\t      <h1>{this.state.isseeking ? this.state.clock : this.state.percentage}</h1>\r\n\t\t      <PlayerControls change = {this.onSeekChange} duration={this.state.duration} seek={ this.state.seek } _onMouseDown = {this.onSeekSearch} _onMouseUp = {this.onSeekDone} /> \r\n\t\t      <button onClick = {this.onTogglePlay}>Pause/Play</button>\r\n\t\t      <button onClick = {this.onToggleNext}> Next Video</button>\r\n\t\t      <VideoQueue {...this.props} dragEnd = {this.onDragEnd} dragOver = {this.onDragOver} dragStart={this.onDragStart} deleteVideo = {this.onDelete} changeVideo = {this.nextVideo} videoNames = {this.state.queue} />\r\n\t      </div>\r\n\t    );\r\n\t  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}